# Gemie â€” Reality Quest

<p align="center">
  <img src="gemie.png" alt="Gemie" width="200" />
</p>

<p align="center">
  <strong>AR + Gemini API ã§ç¾å®Ÿä¸–ç•Œã‚’ã‚²ãƒ¼ãƒ åŒ–ã™ã‚‹ã€AI ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è‚²æˆã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼</strong>
</p>

<p align="center">
  Gemini 3 Tokyo Hackathon (2025/02/21) æå‡ºä½œå“<br/>
  å•é¡Œã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ 1: <em>AI ã‚’æ´»ç”¨ã—ãŸã‚²ãƒ¼ãƒ </em>
</p>

---

## What is Gemie?

**Gemie (ã‚¸ã‚§ãƒŸãƒ¼)** ã¯ã€AR ç©ºé–“ã«ä½ã‚€ AI ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚ã‚¸ã‚§ãƒŸãƒ¼ã¯ã€Œèµ¤ãã¦ä¸¸ã„ã‚‚ã®ã‚’è¦‹ã›ã¦!ã€ã€ŒãŠã„ã—ãã†ãªã‚¯ãƒƒã‚­ãƒ¼ãŒé£Ÿã¹ãŸã„ãªã€œã€ã¨ã„ã£ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«éŸ³å£°ã§ä¼ãˆã¦ãã¾ã™ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ç¾å®Ÿã®ç‰©ã‚’ã‚«ãƒ¡ãƒ©ã«æ˜ ã—ã¦å¿œãˆã€AI ãŒãã®å ´ã§åˆ¤å®šã—ã¾ã™ã€‚

**åŒã˜ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã‚‚ã€ãƒ—ãƒ¬ã‚¤ç’°å¢ƒï¼ˆéƒ¨å±‹ãƒ»æŒã¡ç‰©ï¼‰ã«ã‚ˆã£ã¦ä½“é¨“ãŒæ¯å›å¤‰ã‚ã‚Šã¾ã™ã€‚**

---

## Screenshots

| ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ | AR èµ·å‹•ãƒ»ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | åˆ¤å®šçµæœãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|:---:|:---:|:---:|
| ![Menu](initial-page.png) | ![AR](after-ar-start.png) | ![Judge](after-judge-result.png) |

---

## Game Loop

```
ğŸ® AR èµ·å‹•
  â†“
ğŸ—£ï¸ ã‚¸ã‚§ãƒŸãƒ¼ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’éŸ³å£°ã§ä¼ãˆã‚‹ (Gemini Live API)
  â†“
ğŸ“¸ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒç¾å®Ÿã®ç‰©ã‚’ã‚«ãƒ¡ãƒ©ã«æ˜ ã™
  â†“
ğŸ” AI ãŒç”»åƒã‚’åˆ¤å®š (Gemini Vision API)
  â”œâ”€ æˆåŠŸ â†’ ğŸ‰ ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³éŸ³å£° + ã‚¤ãƒ©ã‚¹ãƒˆ + ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä¿å­˜
  â””â”€ å¤±æ•— â†’ ğŸ’¬ ãƒ’ãƒ³ãƒˆéŸ³å£°ã§å†ãƒãƒ£ãƒ¬ãƒ³ã‚¸
  â†“
ğŸ”„ æ¬¡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¸ï¼ˆå±¥æ­´ã«åŸºã¥ãæ–‡è„ˆçš„ã«ç”Ÿæˆï¼‰
```

---

## Gemini API ã®æ´»ç”¨

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **Gemini API ã‚’ 3 ç¨®é¡ã€ã‚²ãƒ¼ãƒ ã®ã‚³ã‚¢ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹ã¨ã—ã¦** ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

| API | ç”¨é€” | å½¹å‰² |
|-----|------|------|
| **Gemini Live API** | ãƒªã‚¯ã‚¨ã‚¹ãƒˆéŸ³å£°ãƒ»ãƒ’ãƒ³ãƒˆãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | ã‚¸ã‚§ãƒŸãƒ¼ã®ã€Œå£°ã€ãã®ã‚‚ã®ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°åˆæˆ |
| **Gemini Vision API** | ã‚«ãƒ¡ãƒ©ç”»åƒã®åˆ¤å®š | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã›ãŸç‰©ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¡ä»¶ã‚’æº€ãŸã™ã‹åˆ¤å®š |
| **Gemini Text Generation** | ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”Ÿæˆãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆãƒ»ãƒ¡ãƒ¢ãƒªè¦ç´„ | éå»ã®å±¥æ­´ã‹ã‚‰æ–‡è„ˆçš„ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç”Ÿæˆ |

AI ã¯ã€Œé›°å›²æ°—æ¼”å‡ºã€ã§ã¯ãªãã€**ã‚²ãƒ¼ãƒ é€²è¡Œãã®ã‚‚ã®ã‚’åˆ¶å¾¡ã™ã‚‹ã‚³ã‚¢ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹**ã§ã™ã€‚

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser (Vite SPA / PWA)                           â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Game FSM  â”‚  â”‚ AR Layer â”‚  â”‚  AI Services     â”‚ â”‚
â”‚  â”‚ (6 phase) â”‚  â”‚ Three.js â”‚  â”‚  â”œ Live API      â”‚ â”‚
â”‚  â”‚           â”‚  â”‚ WebXR /  â”‚  â”‚  â”œ Vision Judge  â”‚ â”‚
â”‚  â”‚           â”‚  â”‚ iOS cam  â”‚  â”‚  â”œ Request Gen   â”‚ â”‚
â”‚  â”‚           â”‚  â”‚          â”‚  â”‚  â”” Reaction Gen  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚              â”‚                 â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              State Store (localStorage)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ /api proxy
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bun Server (port 8787)â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  REST API: /api/memories               â”‚          â”‚
â”‚  â”‚  Memory Summary Service (Gemini Text)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL 16 (Docker)â”‚                              â”‚
â”‚  memories table        â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State Machine

```
menu â†’ listening â†’ requesting â†’ waiting_capture â†’ validating â†’ reaction â†’ requesting ...
                                      â†‘                |
                                      â””â”€â”€ JUDGE_FAILED â”€â”˜
```

---

## Tech Stack

| Layer | Technology |
|-------|-----------|
| Frontend | Vite + TypeScript (strict mode) |
| AR / 3D | Three.js + WebXR (iOS ã‚«ãƒ¡ãƒ©ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ fallback) |
| AI | `@google/genai` â€” Live API, Vision, Text Generation |
| Validation | Zod (API å¢ƒç•Œãƒ»æ°¸ç¶šåŒ–å¢ƒç•Œ) |
| Backend | Bun HTTP Server |
| Database | PostgreSQL 16 (Docker) |
| Testing | Vitest (v8 coverage, 80%+ threshold) |
| Package Manager | Bun |

---

## Getting Started

### Prerequisites

- [Bun](https://bun.sh/) v1.0+
- [Docker](https://www.docker.com/) (PostgreSQL ç”¨)
- Google API Key (Gemini API)

### Setup

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/rim0o8/gemie.git
cd gemie/reality-quest

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
bun install

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cp .env.example .env
# .env ã« VITE_GOOGLE_API_KEY ã‚’è¨­å®š

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èµ·å‹•
bun run db:up

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹• (ãƒ•ãƒ­ãƒ³ãƒˆ + ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)
bun run dev &
bun run dev:server
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã‚’é–‹ãã€ã€ŒAR ã‚’é–‹å§‹ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚

### Build

```bash
bun run build    # Production build â†’ dist/
bun run check    # Lint + TypeCheck + Test (coverage 80%+)
```

---

## Project Structure

```
gemie/
â”œâ”€â”€ reality-quest/          # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/            # Bootstrap, game loop, AR init
â”‚   â”‚   â”œâ”€â”€ ar/             # WebXR renderer, iOS camera fallback
â”‚   â”‚   â”œâ”€â”€ camera/         # Frame capture (getUserMedia)
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ character/  # ã‚¸ã‚§ãƒŸãƒ¼ã®è‚²æˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»çŠ¶æ…‹é·ç§»
â”‚   â”‚   â”‚   â”œâ”€â”€ judge/      # Gemini Vision åˆ¤å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ narrator/   # Live API éŸ³å£°åˆæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ reaction/   # ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ request/    # ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ memory/     # ãƒ¡ãƒ¢ãƒª API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ voiceChat/  # éŸ³å£°å¯¾è©±
â”‚   â”‚   â”œâ”€â”€ engine/         # Game FSM (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”œâ”€â”€ shared/         # Zod ã‚¹ã‚­ãƒ¼ãƒ, ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ ui/             # DOM overlay, Phase UI model
â”‚   â”œâ”€â”€ server/             # Bun HTTP backend
â”‚   â”‚   â””â”€â”€ src/            # REST API, PostgreSQL, Memory Summary
â”‚   â””â”€â”€ public/             # Static assets, PWA icons
â”œâ”€â”€ play/                   # Gemini Live API CLI playground
â””â”€â”€ ideas/                  # ä¼ç”»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

---

## Hackathon æœŸé–“ä¸­ã«æ§‹ç¯‰ã—ãŸæ©Ÿèƒ½

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Gemini 3 Tokyo Hackathon (2025/02/21) ã®æœŸé–“ä¸­ã«å…¨ã¦ã‚¼ãƒ­ã‹ã‚‰æ§‹ç¯‰** ã—ã¾ã—ãŸã€‚

- Game Engine (FSM): 6 ãƒ•ã‚§ãƒ¼ã‚ºã®çŠ¶æ…‹é·ç§»ã‚’ç´”ç²‹é–¢æ•°ã§å®Ÿè£…
- Gemini Live API çµ±åˆ: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°ã«ã‚ˆã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ’ãƒ³ãƒˆãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- Gemini Vision åˆ¤å®š: ã‚«ãƒ¡ãƒ©ç”»åƒ + æ¡ä»¶ã® structured output åˆ¤å®š
- AR ãƒ¬ã‚¤ãƒ¤ãƒ¼: Three.js + WebXR (iOS fallback ä»˜ã)
- è‚²æˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: affection / hunger / mood ã®å‹•çš„å¤‰åŒ–
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”Ÿæˆ: éå»å±¥æ­´ã«åŸºã¥ãæ–‡è„ˆçš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆè‡ªå‹•ç”Ÿæˆ
- ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ : æˆåŠŸã‚­ãƒ£ãƒ—ãƒãƒ£ã® PostgreSQL æ°¸ç¶šåŒ– + Gemini ã«ã‚ˆã‚‹è¦ç´„
- ãƒ†ã‚¹ãƒˆ: 18 ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã€80%+ ã‚«ãƒãƒ¬ãƒƒã‚¸

---

## å¯©æŸ»åŸºæº–ã¸ã®å¯¾å¿œ

| åŸºæº– | é…ç‚¹ | å¯¾å¿œ |
|------|------|------|
| **ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ** | 25% | ç¾å®Ÿç©ºé–“ã‚’ãã®ã¾ã¾ã‚²ãƒ¼ãƒ ç›¤ã«å¤‰ãˆã‚‹ã€‚é…ä¿¡ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ»æ•™è‚²ã¸ã®å±•é–‹æ€§ãŒé«˜ã„ |
| **ãƒ‡ãƒ¢** | 50% | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å®Ÿè¡Œå‹•ã¨ AI ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¤å®šã‚’ãã®å ´ã§å®Ÿè¨¼ã€‚å…¨ã¦ã® AI å‘¼ã³å‡ºã—ãŒãƒ©ã‚¤ãƒ– |
| **å‰µé€ æ€§** | 15% | AR + Live API + Vision ã‚’ã€Œé›°å›²æ°—æ¼”å‡ºã€ã§ã¯ãªãã‚³ã‚¢ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹ã¨ã—ã¦ä½¿ç”¨ |
| **ãƒ”ãƒƒãƒ** | 10% | ãƒ«ãƒ¼ãƒ«èª¬æ˜ãŒå˜ç´”: ã€Œã‚¸ã‚§ãƒŸãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ç¾å®Ÿã®ç‰©ã§å¿œãˆã‚‹ã€ |

---

## License

This project was created for the Gemini 3 Tokyo Hackathon.
